{% extends 'base.html' %}

{% block title %}Traducció en curs{% endblock %}

{% block content %}
<main>
    <div class="card">
        <div class="progress-container">
            <h2>Traducció en curs...</h2>
            <div class="progress-circle"></div>
            <p id="status-message">Estem traduïnt el teu document. Pot trigar uns minuts...</p>
        </div>
    </div>

    <script>
        const filename = "{{ filename }}";
        const processType = "translate";
        const statusMessage = document.getElementById('status-message');

        function checkStatus() {
            fetch(`/check_status/${processType}/${filename}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'completed') {
                        window.location.href = `/result_${processType}/${filename}`;
                    } else {
                        // Simulate progress or update UI if needed
                        setTimeout(checkStatus, 5000); // Check status every 5 seconds
                    }
                });
        }

        checkStatus();
    </script>
</main>
{% endblock %}
